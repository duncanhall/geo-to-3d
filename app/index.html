<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Geo to 3D</title>
    <style>
        *, html, body { margin: 0; padding:0; background: #000000 }
    </style>
</head>
<body>
    <script src="/lib/pixi.min.js"></script>
    <script>
        var PADDING = 20;
        var WIDTH = window.innerWidth - PADDING;
        var HEIGHT = window.innerHeight - PADDING;

        var _renderer = PIXI.autoDetectRenderer(WIDTH, HEIGHT, {antialias: true});
        var _stage = new PIXI.Container();
        var _graphics = new PIXI.Graphics();

        _stage.interactive = true;
        document.body.appendChild(_renderer.view);
        _stage.addChild(_graphics);


        function findGeoRange (coords) {
            return coords.reduce(function (bounds, coord) {
                return {
                    n: Math.max(bounds.n, coord.lat),
                    s: Math.min(bounds.s, coord.lat),
                    e: Math.max(bounds.e, coord.long),
                    w: Math.min(bounds.w, coord.long)
                }
            },
            {n:-91, s:91, e:-181, w:181});
        }

        function latLongToCartesian (coords, cartesianWidth, cartesianHeight) {

            var geoRange = coords.reduce(function (bounds, coord)
                {
                    return {
                        n: Math.max(bounds.n, coord.lat),
                        s: Math.min(bounds.s, coord.lat),
                        e: Math.max(bounds.e, coord.long),
                        w: Math.min(bounds.w, coord.long)
                    }
                },
                {n:-91, s:91, e:-181, w:181});

            var latRange = geoRange.n - geoRange.s;
            var longRange = geoRange.e - geoRange.w;

            return coords.map(function (c) {
                var y = ((geoRange.n - c.lat) / latRange) * cartesianHeight;
                var x = ((c.long - geoRange.w) / longRange) * cartesianWidth;
                return {x:x, y:y}
            });
        }


        var coOrds = [
            {lat:27.994401, long:-51.152344},
            {lat:54.775346, long:-14.589844},
            {lat:45.828799, long:14.941406},
            {lat:65.219894, long:97.207031},
            {lat:-37.996163, long:83.144531}
        ];

        var cartesian = latLongToCartesian(coOrds, WIDTH, HEIGHT);

        drawPoints(cartesian);

        function drawPoints (points) {
            var temp = points.concat();
            var first = temp.shift();

            _graphics.clear();
            _graphics.lineStyle(2, 0xFF0000, 1);
            _graphics.moveTo(first.x, first.y);

            temp.forEach(function (p) { _graphics.lineTo(p.x, p.y) });

            _renderer.render(_stage);
        }

    </script>
</body>
</html>